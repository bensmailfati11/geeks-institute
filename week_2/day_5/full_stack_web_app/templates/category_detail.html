{% extends "base.html" %}

{% block content %}
<div class="max-w-6xl mx-auto">
    {% if category %}
    <!-- En-t√™te de la cat√©gorie -->
    <div class="bg-white rounded-2xl shadow-lg overflow-hidden mb-8">
        <div class="relative h-80 bg-gradient-to-r from-library-primary to-brown-800">
            <div class="absolute inset-0 flex items-center justify-between px-8">
                <div class="text-white">
                    <h1 class="text-5xl font-serif font-bold mb-4">{{ category.name }}</h1>
                    <p class="text-2xl opacity-90 mb-4">{{ category.description }}</p>
                    <div class="flex items-center space-x-6">
                        <span class="text-library-accent text-xl font-semibold">{{ category.book_count }} livres disponibles</span>
                        <span class="text-4xl bg-library-primary bg-opacity-70 rounded-full p-3">{{ category.icon }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Livres de la cat√©gorie -->
    <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
        <h2 class="text-3xl font-serif font-bold text-library-primary mb-8 text-center">üìö Livres dans "{{ category.name }}"</h2>
        
        {% if books %}
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for book in books %}
            <div class="book-card bg-library-secondary rounded-xl p-6 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                <div class="flex flex-col">
                    <div class="flex items-start space-x-4 mb-4">
                        <img src="{{ book.cover_image or '/static/images/default-book.jpg' }}" 
                             alt="{{ book.title }}" 
                             class="w-20 h-28 object-cover rounded-lg shadow-md"
                             onerror="this.src='/static/images/default-book.jpg'">
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-gray-800 mb-2">{{ book.title }}</h3>
                            <p class="text-library-primary font-medium mb-2">par {{ book.author_name or 'Auteur inconnu' }}</p>
                            {% if book.genre %}
                            <span class="bg-library-primary text-white px-3 py-1 rounded-full text-xs">{{ book.genre }}</span>
                            {% endif %}
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm line-clamp-3 mb-4 flex-1">{{ book.description or 'Aucune description disponible.' }}</p>
                    <div class="flex justify-between items-center">
                        <a href="{{ url_for('details', book_id=book.id) }}" 
                           class="vintage-btn text-white px-4 py-2 rounded-lg text-sm font-semibold hover:shadow-lg transition">
                           Voir d√©tails
                        </a>
                        {% if book.publication_year %}
                        <span class="text-xs text-gray-500">{{ book.publication_year }}</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-16">
            <div class="text-8xl mb-6 text-gray-300">üìñ</div>
            <h3 class="text-2xl font-semibold text-gray-500 mb-4">Aucun livre dans cette cat√©gorie</h3>
            <p class="text-gray-400 text-lg mb-6">Les livres seront bient√¥t ajout√©s √† cette collection.</p>
            <a href="{{ url_for('create') }}" class="vintage-btn text-white px-8 py-4 rounded-lg font-semibold text-lg inline-block">
                Ôºã Ajouter un Livre
            </a>
        </div>
        {% endif %}
    </div>

    <!-- Navigation -->
    <div class="flex justify-between items-center mb-8">
        <a href="{{ url_for('categories') }}" class="vintage-btn text-white px-8 py-4 rounded-xl font-semibold text-lg hover:shadow-lg transition">
            ‚Üê Retour aux Cat√©gories
        </a>
        <a href="{{ url_for('index') }}" class="bg-gray-500 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:bg-gray-600 transition">
            üè† Page d'Accueil
        </a>
    </div>

    {% else %}
    <!-- Cat√©gorie non trouv√©e -->
    <div class="text-center py-20 bg-white rounded-2xl shadow-lg">
        <div class="text-8xl mb-6 text-gray-300">‚ùå</div>
        <h2 class="text-3xl font-semibold text-gray-600 mb-4">Cat√©gorie Non Trouv√©e</h2>
        <p class="text-gray-500 text-xl mb-8">La cat√©gorie que vous recherchez n'existe pas ou a √©t√© supprim√©e.</p>
        <div class="space-x-4">
            <a href="{{ url_for('categories') }}" class="vintage-btn text-white px-8 py-4 rounded-xl font-semibold text-lg">
                üìÇ Parcourir les Cat√©gories
            </a>
            <a href="{{ url_for('index') }}" class="bg-gray-500 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:bg-gray-600 transition">
                üè† Retour √† l'Accueil
            </a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}